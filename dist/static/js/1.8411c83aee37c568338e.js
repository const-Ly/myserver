webpackJsonp([1],{"/5xu":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,".van-image-preview{position:fixed;top:0;left:0;width:100%;height:100%}.van-image-preview__swipe{height:100%}.van-image-preview__swipe-item{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;overflow:hidden}.van-image-preview__cover{position:absolute;top:0;left:0}.van-image-preview__image{width:100%;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform}.van-image-preview__image--vertical{width:auto;height:100%}.van-image-preview__image img{-webkit-user-drag:none}.van-image-preview__image .van-image__error{top:30%;height:40%}.van-image-preview__image .van-image__error-icon{font-size:36px}.van-image-preview__image .van-image__loading{background-color:transparent}.van-image-preview__index{position:absolute;top:16px;left:50%;color:#fff;font-size:14px;line-height:20px;text-shadow:0 1px 1px #323233;-webkit-transform:translate(-50%);transform:translate(-50%)}.van-image-preview__overlay{background-color:rgba(0,0,0,.9)}.van-image-preview__close-icon{position:absolute;z-index:1;color:#c8c9cc;font-size:22px;cursor:pointer}.van-image-preview__close-icon:active{color:#969799}.van-image-preview__close-icon--top-left{top:16px;left:16px}.van-image-preview__close-icon--top-right{top:16px;right:16px}.van-image-preview__close-icon--bottom-left{bottom:16px;left:16px}.van-image-preview__close-icon--bottom-right{right:16px;bottom:16px}",""])},"3K2d":function(t,e,i){"use strict";function a(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var s=i("tXg5"),o=i("joY4"),n=i("RP/J"),r=i("vwLT"),c=i("Wtz3"),h=i("pIDD"),l=i("rD0v");e.a={mixins:[r.a],props:{src:String,show:Boolean,active:Number,minZoom:[Number,String],maxZoom:[Number,String],rootWidth:Number,rootHeight:Number},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}},computed:{vertical:function(){var t=this.rootWidth,e=this.rootHeight,i=e/t;return this.imageRatio>i},imageStyle:function(){var t=this.scale,e={transitionDuration:this.zooming||this.moving?"0s":".3s"};if(1!==t){var i=this.moveX/t,a=this.moveY/t;e.transform="scale("+t+", "+t+") translate("+i+"px, "+a+"px)"}return e},maxMoveX:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight/this.imageRatio:this.rootWidth;return Math.max(0,(this.scale*t-this.rootWidth)/2)}return 0},maxMoveY:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight:this.rootWidth*this.imageRatio;return Math.max(0,(this.scale*t-this.rootHeight)/2)}return 0}},watch:{active:"resetScale",show:function(t){t||this.resetScale()}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{resetScale:function(){this.setScale(1),this.moveX=0,this.moveY=0},setScale:function(t){(t=i.i(o.a)(t,+this.minZoom,+this.maxZoom))!==this.scale&&(this.scale=t,this.$emit("scale",{scale:this.scale,index:this.active}))},toggleScale:function(){var t=this.scale>1?1:2;this.setScale(t),this.moveX=0,this.moveY=0},onTouchStart:function(t){var e=t.touches,i=this.offsetX,s=void 0===i?0:i;this.touchStart(t),this.touchStartTime=new Date,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.moving=1===e.length&&1!==this.scale,this.zooming=2===e.length&&!s,this.zooming&&(this.startScale=this.scale,this.startDistance=a(t.touches))},onTouchMove:function(t){var e=t.touches;if(this.touchMove(t),(this.moving||this.zooming)&&i.i(n.a)(t,!0),this.moving){var s=this.deltaX+this.startMoveX,r=this.deltaY+this.startMoveY;this.moveX=i.i(o.a)(s,-this.maxMoveX,this.maxMoveX),this.moveY=i.i(o.a)(r,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var c=a(e),h=this.startScale*c/this.startDistance;this.setScale(h)}},onTouchEnd:function(t){var e=!1;(this.moving||this.zooming)&&(e=!0,this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.zooming&&(this.moveX=i.i(o.a)(this.moveX,-this.maxMoveX,this.maxMoveX),this.moveY=i.i(o.a)(this.moveY,-this.maxMoveY,this.maxMoveY),this.zooming=!1),this.moving=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale())),i.i(n.a)(t,e),this.checkTap(),this.resetTouchStatus()},checkTap:function(){var t=this,e=this.offsetX,i=void 0===e?0:e,a=this.offsetY,s=void 0===a?0:a,o=new Date-this.touchStartTime;i<10&&s<10&&o<250&&(this.doubleTapTimer?(clearTimeout(this.doubleTapTimer),this.doubleTapTimer=null,this.toggleScale()):this.doubleTapTimer=setTimeout(function(){t.$emit("close"),t.doubleTapTimer=null},250))},onLoad:function(t){var e=t.target,i=e.naturalWidth,a=e.naturalHeight;this.imageRatio=a/i}},render:function(){var t=arguments[0],e={loading:function(){return t(h.a,{attrs:{type:"spinner"}})}};return t(l.a,{class:i.i(s.b)("swipe-item")},[t(c.a,{attrs:{src:this.src,fit:"contain"},class:i.i(s.b)("image",{vertical:this.vertical}),style:this.imageStyle,scopedSlots:e,on:{load:this.onLoad}})])}}},CGQl:function(t,e,i){var a=i("/5xu");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("4636f006",a,!0,{})},GZ5H:function(t,e,i){"use strict";function a(t){i("rNRV")}Object.defineProperty(e,"__esModule",{value:!0});var s=i("Q/hM"),o=i("nmPX"),n=i("VU/8"),r=a,c=n(s.a,o.a,!1,r,"data-v-6eaa461a",null);e.default=c.exports},OhwO:function(t,e,i){"use strict";var a,s=i("RfZZ"),o=i("7+uW"),n=i("TWrO"),r=i("o69Z"),c={loop:!0,value:!0,images:[],maxZoom:3,minZoom:1/3,onClose:null,onChange:null,className:"",showIndex:!0,closeable:!1,closeIcon:"clear",asyncClose:!1,transition:"van-fade",getContainer:"body",startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},h=function(){a=new(o.a.extend(n.a))({el:document.createElement("div")}),document.body.appendChild(a.$el),a.$on("change",function(t){a.onChange&&a.onChange(t)}),a.$on("scale",function(t){a.onScale&&a.onScale(t)})},l=function(t,e){if(void 0===e&&(e=0),!r.a){a||h();var o=Array.isArray(t)?{images:t,startPosition:e}:t;return i.i(s.a)(a,c,o),a.$once("input",function(t){a.value=t}),a.$once("closed",function(){a.images=[]}),o.onClose&&(a.$off("close"),a.$once("close",o.onClose)),a}};l.Component=n.a,l.install=function(){o.a.use(n.a)},e.a=l},"Q/hM":function(t,e,i){"use strict";var a=(i("WJbf"),i("OhwO")),s=i("Xxa5"),o=i.n(s),n=i("exGp"),r=i.n(n),c=i("Dd8w"),h=i.n(c),l=i("U4zD"),m=i("k+Rk"),d=i("yt7g"),u=i("BK/k"),g=i("2sBs"),v=i.n(g),f=i("OzXt"),p=i.n(f),w=i("NYxO"),_=i("z5Hi"),b=i("dn3/"),x=i("WzBM"),y={0:"favouriteAdd",1:"favouriteCancel"};e.a={data:function(){return{isShowVideoDetail:!1,currentPalyVideoUrl:"",showVideoPlay:!1,scrollIntoBottom:!0,isLoading:!1,messageList:[],myImUid:"",myAvatar:"",inputMessageText:"",localize:p.a,isFocus:!1,isShowFavourite:!1}},components:{AnchorDetail:_.a,AnchorVideo:b.a,UserMediaPop:x.default},watch:{chatDetail:function(t){var e=this;this.$store.dispatch("TRANSLATE",t),this.scrollIntoBottom&&this.$nextTick(function(){e.watchInnerItem=e.watchInnerItem||document.getElementsByClassName("message-list")[0],e.watchInnerItem.scrollIntoView(!1)})},currentConversationHasNext:function(t){t||(this.isLoading=!1)},chatDetailLoadingFlag:function(){this.isLoading=!1}},computed:h()({},i.i(w.b)(["chatDetail","currentConversationHasNext","currentChatAnchorDetail","translateMaps","autoSendMessage","chatDetailLoadingFlag"])),created:function(){if(this.isLogin=i.i(d.a)("isHasLogin"),!this.currentChatAnchorDetail.im_conv_id||!this.isLogin)return void this.$router.push("/");this.sendMessageCount=0,this.userInfo=i.i(d.a)("UserInfo"),this.myImUid=this.userInfo.im_uid,this.myAvatar=this.userInfo.icon,this.createSocketPage(this.userInfo)},mounted:function(){if(this.chatDetail.length>0){this.$store.dispatch("TRANSLATE",this.chatDetail),setTimeout(function(){var t=document.getElementsByClassName("message-list")[0];t&&t.scrollIntoView(!1)},10);var t=i.i(l.a)(this.currentChatAnchorDetail.im_conv_id);this.rwSocketClient.send(t),this.$store.commit("UPDATE_UN_READ_MESSAGE_MAPS",this.currentChatAnchorDetail.im_conv_id)}this.autoSendMessage&&this.handleSendMessages(this.autoSendMessage),void 0===this.currentChatAnchorDetail.is_favourite?this.getFavouriteAndConv():this.isShowFavourite=!0,this.$reportAnalyticsFun("CHAT_MSG_CLICK")},methods:{getFavouriteAndConv:function(){var t=this;return r()(o.a.mark(function e(){var i,a,s,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.getTargetsRelation({fields:["is_favourite"],target_uids:[t.currentChatAnchorDetail.id]});case 3:i=e.sent,a=i.data,s=void 0===a?{}:a,n=i.result,0==n&&s.list.length>0&&(t.currentChatAnchorDetail.is_favourite=s.list[0].is_favourite?1:0,t.isShowFavourite=!0),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,t,[[0,10]])}))()},formatDate:d.e,chatPrivateCall:function(){this.currentChatAnchorDetail.enterSource="convo",this.$refs.anchorVideo.privateCall(this.currentChatAnchorDetail)},handleUserMedia:function(){this.$refs.userMediaPop.changePopStatus(!0)},handleFollowStatus:function(t){this.currentChatAnchorDetail.is_favourite=t,this.$store.commit("SAVE_CURRENT_ANCHOR_DETAIL",this.currentChatAnchorDetail)},clickAnchorAvatar:function(){var t=this;this.isShowVideoDetail?this.showDetailComponent():(this.isShowVideoDetail=!0,this.$nextTick(function(){t.showDetailComponent()}))},showDetailComponent:function(){this.currentChatAnchorDetail.picture_list&&this.$refs.videoDetail.show([this.currentChatAnchorDetail],0)},palyVideo:function(t){var e=this;this.showVideoPlay=!0,this.currentPalyVideoUrl=t,this.$nextTick(function(){e.$refs.videPlay.play()})},clickVideoClose:function(){this.showVideoPlay=!1,this.$refs.videPlay.pause()},imagePreview:a.a,goBack:function(){this.$store.commit("UPDATE_UN_READ_MESSAGE_MAPS",this.currentChatAnchorDetail.im_conv_id);var t=i.i(d.a)("localStorageMessageMaps")||{};t[this.currentChatAnchorDetail.im_conv_id]=this.chatDetail,i.i(d.d)("localStorageMessageMaps",t);var e=i.i(l.a)(this.currentChatAnchorDetail.im_conv_id);this.rwSocketClient.send(e);try{this.$router.go(-1)}catch(t){this.$router.push("/chatList")}this.$reportAnalyticsFun("CHAT_MSG_LEAVE",{msg_send:this.sendMessageCount})},createSocketPage:function(t){console.log("连接socket"),this.rwSocketClient=i.i(m.b)(u.a.socketUrl+"?"+v()({accessToken:t.im_token,platform:u.b,sdkVersion:u.c}),this)},onRefresh:function(){this.scrollIntoBottom=!1;var t=this.chatDetail[0]?this.chatDetail[0].created_at:-1,e=i.i(l.c)(this.currentChatAnchorDetail.im_conv_id,t);this.rwSocketClient.send(e)},getConversationMessage:function(){this.scrollIntoBottom||(this.scrollIntoBottom=!0)},handleSendMessages:function(t){if(t&&(1==t&&(this.inputMessageText="🌹"),2==t&&(this.inputMessageText="😘"),"hi"==t&&(this.inputMessageText="hi")),this.inputMessageText){var e=Math.round((new Date).getTime()),a={conv_id:this.currentChatAnchorDetail.conv_id,im_uid:this.currentChatAnchorDetail.im_uid,uid:this.userInfo.id,text:this.inputMessageText,sender_uid:this.userInfo.id,time:e},s=i.i(l.g)(a);this.rwSocketClient.send(s),this.$store.commit("PRIVATE_MESSAGE",{createdAt:e,body:this.inputMessageText,senderUid:this.myImUid,type:"text",hasRead:!0,conversationId:this.currentChatAnchorDetail.im_conv_id}),this.sendMessageCount++,this.scrollIntoBottom=!0,this.sendMessageConversation(),this.inputMessageText="",this.$reportAnalyticsFun("CHAT_SEND_MESSAGE",{receiver_id:this.currentChatAnchorDetail.id}),this.autoSendMessage&&this.$store.commit("SAVE_AUTO_SEND_MESSAGE","")}},sendMessagesSubmit:function(t){13==t.keyCode&&this.handleSendMessages()},sendMessageConversation:function(){this.$api.sendMessageConversation({conv_id:this.currentChatAnchorDetail.conv_id,message:this.inputMessageText})},clickFollow:function(){var t=this;return r()(o.a.mark(function e(){var i,a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.requestIng){e.next=3;break}return e.abrupt("return");case 3:return t.requestIng=!0,console.log(t.currentChatAnchorDetail.is_favourite),e.next=7,t.$api[y[t.currentChatAnchorDetail.is_favourite?1:0]]({target_uid:t.currentChatAnchorDetail.id});case 7:i=e.sent,a=i.result,s=i.message,t.requestIng=!1,0==a?(t.currentChatAnchorDetail.is_favourite=t.currentChatAnchorDetail.is_favourite?0:1,t.currentChatAnchorDetail.is_favourite?(t.$toast(t.localize.string_follow_toast),t.$reportAnalyticsFun("CHAT_CLICK",{result:"follow",receiver_id:t.currentChatAnchorDetail.id})):(t.$toast(t.localize.string_unfollow_toast),t.$reportAnalyticsFun("CHAT_CLICK",{result:"unfollow",receiver_id:t.currentChatAnchorDetail.id})),t.$store.commit("SAVE_CURRENT_ANCHOR_DETAIL",t.currentChatAnchorDetail)):t.$toast(s),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),t.requestIng=!1;case 18:case"end":return e.stop()}},e,t,[[0,14]])}))()},focus:function(){this.isFocus=!0},blur:function(){this.isFocus=!1,this.innerItem=this.innerItem||document.getElementsByClassName("message-list")[0],document.getElementsByClassName("message-list")[0].scrollIntoView(!1)}}}},TWrO:function(t,e,i){"use strict";var a=i("tXg5"),s=i("CsZI"),o=i("vwLT"),n=i("5Fm4"),r=i("+2ln"),c=i("7ZPY"),h=i("3K2d");e.a=i.i(a.a)({mixins:[o.a,i.i(s.a)({skipToggleEvent:!0}),i.i(n.a)(function(t){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0)})],props:{className:null,closeable:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},transition:{type:String,default:"van-fade"},showIndex:{type:Boolean,default:!0},swipeDuration:{type:[Number,String],default:300},startPosition:{type:[Number,String],default:0},overlayClass:{type:String,default:i.i(a.b)("overlay")},closeIcon:{type:String,default:"clear"},closeOnPopstate:{type:Boolean,default:!0},closeIconPosition:{type:String,default:"top-right"}},data:function(){return{active:0,rootWidth:0,rootHeight:0,doubleClickTimer:null}},mounted:function(){this.resize()},watch:{startPosition:"setActive",value:function(t){var e=this;t?(this.setActive(+this.startPosition),this.$nextTick(function(){e.resize(),e.$refs.swipe.swipeTo(+e.startPosition,{immediate:!0})})):this.$emit("close",{index:this.active,url:this.images[this.active]})}},methods:{resize:function(){if(this.$el&&this.$el.getBoundingClientRect){var t=this.$el.getBoundingClientRect();this.rootWidth=t.width,this.rootHeight=t.height}},emitClose:function(){this.asyncClose||this.$emit("input",!1)},emitScale:function(t){this.$emit("scale",t)},setActive:function(t){t!==this.active&&(this.active=t,this.$emit("change",t))},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:i.i(a.b)("index")},[this.slots("index",{index:this.active})||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,e=this.slots("cover");if(e)return t("div",{class:i.i(a.b)("cover")},[e])},genImages:function(){var t=this,e=this.$createElement;return e(c.a,{ref:"swipe",attrs:{lazyRender:!0,loop:this.loop,duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators,indicatorColor:"white"},class:i.i(a.b)("swipe"),on:{change:this.setActive}},[this.images.map(function(i){return e(h.a,{attrs:{src:i,show:t.value,active:t.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:t.rootWidth,rootHeight:t.rootHeight},on:{scale:t.emitScale,close:t.emitClose}})})])},genClose:function(){var t=this.$createElement;if(this.closeable)return t(r.a,{attrs:{role:"button",name:this.closeIcon},class:i.i(a.b)("close-icon",this.closeIconPosition),on:{click:this.emitClose}})},onClosed:function(){this.$emit("closed")},swipeTo:function(t,e){this.$refs.swipe&&this.$refs.swipe.swipeTo(t,e)}},render:function(){var t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterLeave:this.onClosed}},[this.shouldRender?t("div",{directives:[{name:"show",value:this.value}],class:[i.i(a.b)(),this.className]},[this.genClose(),this.genImages(),this.genIndex(),this.genCover()]):null])}})},WJbf:function(t,e,i){"use strict";var a=i("nsZj"),s=(i.n(a),i("02pT")),o=(i.n(s),i("T2s0")),n=(i.n(o),i("1H7Z")),r=(i.n(n),i("nOtf")),c=(i.n(r),i("hW8u")),h=(i.n(c),i("WpgC")),l=(i.n(h),i("JsOw")),m=(i.n(l),i("W0KU")),d=(i.n(m),i("CGQl"));i.n(d)},Wtz3:function(t,e,i){"use strict";var a=i("AA6R"),s=i.n(a),o=i("o69Z"),n=i("+2ln"),r=i.i(o.g)("image"),c=r[0],h=r[1];e.a=c({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconPrefix:String,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var t={};return i.i(o.b)(this.width)&&(t.width=i.i(o.h)(this.width)),i.i(o.b)(this.height)&&(t.height=i.i(o.h)(this.height)),i.i(o.b)(this.radius)&&(t.overflow="hidden",t.borderRadius=i.i(o.h)(this.radius)),t}},created:function(){var t=this.$Lazyload;t&&o.c&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){t.el===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){t.el!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},genPlaceholder:function(){var t=this.$createElement;return this.loading&&this.showLoading?t("div",{class:h("loading")},[this.slots("loading")||t(n.a,{attrs:{name:this.loadingIcon,classPrefix:this.iconPrefix},class:h("loading-icon")})]):this.error&&this.showError?t("div",{class:h("error")},[this.slots("error")||t(n.a,{attrs:{name:this.errorIcon,classPrefix:this.iconPrefix},class:h("error-icon")})]):void 0},genImage:function(){var t=this.$createElement,e={class:h("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",s()([{ref:"image",directives:[{name:"lazy",value:this.src}]},e])):t("img",s()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},e]))}},render:function(){return(0,arguments[0])("div",{class:h({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder(),this.slots()])}})},cQuT:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,".flex-1[data-v-6eaa461a]{flex:1}.bottom-100[data-v-6eaa461a]{bottom:2.5rem!important}.title[data-v-6eaa461a]{width:100%;background-color:#fff;position:fixed;z-index:10;top:0;display:flex;align-items:center;height:3.5rem;padding:0 1rem;box-sizing:border-box;border-bottom:1px solid #eee}.title .back[data-v-6eaa461a]{width:1.5rem;height:1.5rem;margin-right:.5rem}.title .avatar[data-v-6eaa461a]{width:1.75rem;height:1.75rem;object-fit:cover;border-radius:50%;margin-right:.5rem}.title .name[data-v-6eaa461a]{font-size:1rem;font-weight:600;color:#000}.title .voice-friend[data-v-6eaa461a]{width:1.75rem;height:1.75rem;position:absolute;right:1rem;top:.875rem}.van-pull-refresh[data-v-6eaa461a]{padding-top:3.5rem}.message-list[data-v-6eaa461a]{min-height:calc(100vh - 5rem - 3.5rem - 1.75rem - 6.25rem);display:flex;flex-direction:column;padding-bottom:6.875rem}.message-list .time[data-v-6eaa461a]{margin:.875rem 0;font-size:.75rem;font-weight:500;text-align:center;color:#a8a8a8}.message-list .me-item[data-v-6eaa461a]{margin-right:.75rem;margin-bottom:.875rem;display:flex;justify-content:flex-end}.message-list .me-item .message[data-v-6eaa461a]{max-width:17.5rem;box-sizing:border-box;margin-right:.625rem;background-color:#edffe1;padding:.625rem .75rem;border-radius:.875rem;font-size:1rem;font-weight:500;color:#333}.message-list .me-item .avatar[data-v-6eaa461a]{width:2.5rem;height:2.5rem;border-radius:50%}.message-list .you-item[data-v-6eaa461a]{margin-left:1rem;display:flex;justify-content:flex-start;margin-bottom:.875rem}.message-list .you-item .message[data-v-6eaa461a]{max-width:17.5rem;box-sizing:border-box;margin-right:.625rem;background-color:#fffce1;padding:.625rem .75rem;border-radius:.875rem}.message-list .you-item .message .message-text[data-v-6eaa461a]{font-size:1rem;font-weight:500;color:#333}.message-list .you-item .message .b-t-1[data-v-6eaa461a]{border-top:1px solid #b3b3b3}.message-list .you-item .message .p-t-6[data-v-6eaa461a]{padding-top:.375rem}.message-list .you-item .message .p-b-6[data-v-6eaa461a]{padding-bottom:.375rem}.message-list .you-item .image[data-v-6eaa461a]{width:9.375rem;height:9.375rem;object-fit:cover;border-radius:1.25rem}.message-list .you-item .video-con[data-v-6eaa461a]{position:relative}.message-list .you-item .video-con .video[data-v-6eaa461a]{width:9.375rem;height:9.375rem;border-radius:1.25rem;object-fit:cover}.message-list .you-item .video-con .img[data-v-6eaa461a]{width:2.25rem;height:2.25rem;position:absolute;top:3.4375rem;left:3.5625rem}.message-list .you-item .avatar[data-v-6eaa461a]{margin-right:.625rem;width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover}.bottom[data-v-6eaa461a]{width:100%;padding:0 1rem;box-sizing:border-box;height:4.5rem;position:fixed;z-index:1000;bottom:0;left:0;display:flex;align-items:center;justify-content:space-between;background-color:#fff}.bottom .send-message[data-v-6eaa461a]{flex:1;display:flex;align-items:center;border-radius:1.25rem;height:2.5rem;border:.125rem solid #eee;padding-left:.875rem;box-sizing:border-box}.bottom .send-message .input-text[data-v-6eaa461a]{height:1.25rem;border:none}.bottom .send-message .emoji-icon-1[data-v-6eaa461a]{width:1.4375rem;height:1.4375rem;margin-right:.625rem}.bottom .send-message .emoji-icon-2[data-v-6eaa461a]{width:1.4375rem;height:1.4375rem;margin-right:.25rem}.bottom .send-message .send-icon[data-v-6eaa461a]{width:1.75rem;height:1.75rem;margin-right:.625rem}.bottom .w-10[data-v-6eaa461a]{width:.625rem;height:100%}.bottom .chat-icon-con .chat-icon[data-v-6eaa461a],.bottom .chat-icon-con[data-v-6eaa461a]{width:2.5rem;height:2.5rem}.video-paly-pop[data-v-6eaa461a]{width:100%!important;height:100%!important}.video-paly-pop .video-paly-container[data-v-6eaa461a]{width:100%;height:100%;object-fit:cover}.height-72[data-v-6eaa461a]{width:100%;height:4.5rem}",""])},nOtf:function(t,e,i){var a=i("oRyn");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("11ec6e7c",a,!0,{})},nmPX:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title"},[i("img",{staticClass:"back",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/icon-back-24.png"},on:{click:t.goBack}}),t._v(" "),i("img",{staticClass:"avatar",attrs:{src:t.currentChatAnchorDetail.icon},on:{click:t.clickAnchorAvatar}}),t._v(" "),i("div",{staticClass:"name",on:{click:t.clickAnchorAvatar}},[t._v(t._s(t.currentChatAnchorDetail.first_name))]),t._v(" "),t.isShowFavourite?i("img",{staticClass:"voice-friend",attrs:{src:t.currentChatAnchorDetail.is_favourite?"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/voice-friend-new-active.png":"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/voice-friend-icon.png"},on:{click:t.clickFollow}}):t._e()]),t._v(" "),i("van-pull-refresh",{staticClass:"van-pull-refresh",attrs:{disabled:!t.currentConversationHasNext,"loading-text":"loading...","pulling-text":"Pull to refresh","loosing-text":"Release to refresh","success-text":"succeed"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("div",{staticClass:"message-list"},t._l(t.chatDetail,function(e,a){return i("div",{key:e.id},[a%10==0?i("div",{staticClass:"time"},[t._v(t._s(t.formatDate(e.created_at)))]):t._e(),t._v(" "),i("div",[e.sender_uid===t.myImUid?i("div",{staticClass:"me-item"},[e.content?i("div",{staticClass:"message"},[t._v(t._s(e.content))]):t._e(),t._v(" "),e.content?i("img",{staticClass:"avatar",attrs:{src:t.myAvatar}}):t._e()]):i("div",{staticClass:"you-item"},[i("img",{staticClass:"avatar",attrs:{src:t.currentChatAnchorDetail.icon},on:{click:t.clickAnchorAvatar}}),t._v(" "),1!=e.type&&"text"!=e.type&&1001!=e.type&&6!=e.type&&7!=e.type||!e.content?t._e():i("div",{staticClass:"message"},[i("div",{staticClass:"message-text p-b-6"},[t._v(t._s(e.content))]),t._v(" "),t.translateMaps[e.content.trim()]?i("div",{staticClass:"message-text b-t-1 p-t-6"},[t._v(t._s(t.translateMaps[e.content.trim()]))]):t._e()]),t._v(" "),76!=e.type&&"media"!=e.type||1!=e.parameter.message_type?t._e():i("img",{staticClass:"image",attrs:{src:e.parameter.fullsize},on:{click:function(i){t.imagePreview({images:[e.parameter.fullsize],showIndex:!1})}}}),t._v(" "),76!=e.type&&"media"!=e.type||2!=e.parameter.message_type?t._e():i("div",{staticClass:"video-con"},[i("video",{staticClass:"video",attrs:{src:e.parameter.video_url}},[t._v(t._s(e.content))]),t._v(" "),i("img",{staticClass:"img",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/play-icon.png"},on:{click:function(i){t.palyVideo(e.parameter.video_url)}}})])])])])}))]),t._v(" "),i("div",{class:["bottom",t.isFocus?"bottom-100":""]},[i("div",{staticClass:"send-message"},[i("div",{staticClass:"flex-1"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputMessageText,expression:"inputMessageText",modifiers:{trim:!0}}],ref:"input",staticClass:"input-text",attrs:{type:"text",placeholder:"Type a message…"},domProps:{value:t.inputMessageText},on:{keydown:t.sendMessagesSubmit,focus:t.focus,blur:[t.blur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||(t.inputMessageText=e.target.value.trim())}}})]),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!t.inputMessageText,expression:"!inputMessageText"}],staticClass:"emoji-icon-1",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/3@3x.png"},on:{click:function(e){t.handleSendMessages(1)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!t.inputMessageText,expression:"!inputMessageText"}],staticClass:"emoji-icon-2",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/invalid-names@3x.png"},on:{click:function(e){t.handleSendMessages(2)}}}),t._v(" "),i("img",{staticClass:"send-icon",attrs:{src:t.inputMessageText?"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/send-icon-active.png":"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/send-icon.png"},on:{click:t.handleSendMessages}})]),t._v(" "),i("div",{staticClass:"w-10"}),t._v(" "),i("div",{staticClass:"chat-icon-con"},[i("img",{staticClass:"chat-icon",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/chat-icon-2.png"},on:{click:t.chatPrivateCall}})])]),t._v(" "),i("van-popup",{staticClass:"video-paly-pop",model:{value:t.showVideoPlay,callback:function(e){t.showVideoPlay=e},expression:"showVideoPlay"}},[t.showVideoPlay?i("video",{ref:"videPlay",staticClass:"video-paly-container",attrs:{src:t.currentPalyVideoUrl},on:{click:t.clickVideoClose}}):t._e()]),t._v(" "),t.isShowVideoDetail?i("anchor-detail",{ref:"videoDetail",on:{privateCall:t.chatPrivateCall,changeFollowStatus:t.handleFollowStatus}}):t._e(),t._v(" "),i("anchor-video",{ref:"anchorVideo",on:{showUserMedia:t.handleUserMedia,changeFollowStatus:t.handleFollowStatus}}),t._v(" "),i("user-media-pop",{ref:"userMediaPop"})],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},oRyn:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,".van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:50%}.van-image--round img{border-radius:inherit}.van-image__error,.van-image__img,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#969799;font-size:14px;background-color:#f7f8fa}.van-image__error-icon,.van-image__loading-icon{color:#dcdee0;font-size:32px}",""])},rNRV:function(t,e,i){var a=i("cQuT");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("3d1345ad",a,!0,{})},tXg5:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n});var a=i("o69Z"),s=i.i(a.g)("image-preview"),o=s[0],n=s[1]}});