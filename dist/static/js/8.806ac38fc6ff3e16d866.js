webpackJsonp([8],{"2Bsn":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,".van-pull-refresh-me[data-v-b5d34e96]{min-height:18.75rem}.chat-container[data-v-b5d34e96]{box-sizing:border-box;width:23.4375rem;margin:0 auto}.title-container[data-v-b5d34e96]{height:4.375rem;top:0;position:sticky;z-index:10;background-color:#fff}.title-container .back[data-v-b5d34e96]{width:1.5rem;height:1.5rem;margin-right:.5rem;position:absolute;top:1.25rem;left:1.0625rem;z-index:20}.title[data-v-b5d34e96]{height:4.375rem;text-align:center;line-height:4.375rem;position:relative;font-size:1.25rem;font-weight:700;color:#000}.you-like-list[data-v-b5d34e96]{min-height:25rem}.you-like-list .item[data-v-b5d34e96]{padding:0 1.625rem;box-sizing:border-box;height:5rem;display:flex;align-items:center;position:relative}.you-like-list .item .left[data-v-b5d34e96]{width:3.75rem;height:3.75rem;margin-right:.875rem}.you-like-list .item .left .avatar[data-v-b5d34e96]{width:100%;height:100%;border-radius:50%;object-fit:cover}.you-like-list .item .middle .name[data-v-b5d34e96]{width:12.5rem;font-size:1rem;font-weight:600;text-align:left;color:#000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.you-like-list .item .middle .status[data-v-b5d34e96]{display:flex;align-items:center}.you-like-list .item .middle .status .icon[data-v-b5d34e96]{width:.5rem;height:.5rem;border-radius:50%;background-color:#0feaa9;margin-right:.375rem}.you-like-list .item .middle .status .text[data-v-b5d34e96]{font-size:.75rem;font-weight:500;text-align:center;color:#000}.you-like-list .item .right[data-v-b5d34e96]{position:absolute;right:1.25rem}.you-like-list .item .right .message-icon[data-v-b5d34e96]{width:2.5rem;height:2.5rem;margin-right:.875rem}.you-like-list .item .right .chat-icon[data-v-b5d34e96]{width:2.5rem;height:2.5rem}.empty-container[data-v-b5d34e96]{display:flex;flex-direction:column;align-items:center;justify-content:center}.empty-container .empty-text[data-v-b5d34e96]{margin-top:3.75rem;width:20rem;font-size:.875rem;font-weight:500;text-align:center;color:#a8a8a8}.empty-container .to-chat[data-v-b5d34e96]{margin-top:3.75rem;width:11.25rem;height:3.125rem;display:flex;align-items:center;justify-content:center;border-radius:1.5625rem;font-size:1rem;background-color:#ffe300;font-weight:700;text-align:center;color:#000}.bg-red[data-v-b5d34e96]{background-color:#fb4369}",""])},"8Jf6":function(t,e,i){"use strict";function a(t){i("NksW")}Object.defineProperty(e,"__esModule",{value:!0});var r=i("D6UH"),s=i("YVA4"),n=i("VU/8"),o=a,c=n(r.a,s.a,!1,o,"data-v-b5d34e96",null);e.default=c.exports},D6UH:function(t,e,i){"use strict";var a=i("Xxa5"),r=i.n(a),s=i("exGp"),n=i.n(s),o=i("Dd8w"),c=i.n(o),d=i("z5Hi"),l=i("dn3/"),h=i("WzBM"),m=i("yt7g"),u=i("k+Rk"),v=i("BK/k"),g=i("2sBs"),f=i.n(g),p=i("OzXt"),_=i.n(p),b=i("U4zD"),k=i("NYxO");e.a={data:function(){return{isShowVideoDetail:!1,isShowGoLogin:!0,matchHistoryList:[],localize:_.a,currentImConvId:"",needJumpChatDetail:!1}},computed:c()({},i.i(k.b)(["messageMaps"])),watch:{messageMaps:function(){this.messageMaps[this.currentImConvId]&&this.needJumpChatDetail&&this.$router.push("/chatDetail")}},components:{AnchorDetail:d.a,AnchorVideo:l.a,UserMediaPop:h.default},created:function(){this.createSocketPage(i.i(m.a)("UserInfo"))},activated:function(){var t=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.needJumpChatDetail=!1,window.addEventListener("beforeunload",function(t){window.scroll(0,0)}),t.getMatchHistoryList(),t.$reportAnalyticsFun("PAGE_MATCH_HISTORY");case 4:case"end":return e.stop()}},e,t)}))()},methods:{getMatchHistoryList:function(){var t=this;return n()(r.a.mark(function e(){var i,a,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.getMatchHistory();case 3:i=e.sent,a=i.data,s=i.result,n=i.message,0==s?t.matchHistoryList=a.list:t.$toast(n),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,t,[[0,10]])}))()},clickUserAvatar:function(t){var e=this;this.isShowVideoDetail?this.$refs.videoDetail.show([t.user],0):(this.isShowVideoDetail=!0,this.$nextTick(function(){e.$refs.videoDetail.show([t.user],0)}))},createSocketPage:function(t){this.rwSocketClient=i.i(u.b)(v.a.socketUrl+"?"+f()({accessToken:t.im_token,platform:v.b,sdkVersion:v.c}),this)},goChatDetail:function(t){var e=this;return n()(r.a.mark(function a(){var s,n,o,c,d,l,h,u,v;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=t,e.$showLoading(),a.next=5,e.$api.getTargetsRelation({fields:["conv_info"],target_uids:[s.id]});case 5:if(n=a.sent,o=n.data,c=void 0===o?{}:o,d=n.result,l=n.message,0!=d){a.next=24;break}if(c.list[0].conv_info){a.next=19;break}return a.next=14,e.$api.createConversation({target_uid:s.id,source:"flow"});case 14:h=a.sent,e.$hideLoading(),0==h.result&&(e.needJumpChatDetail=!0,s.im_conv_id=h.data.conversation.im_conv_id,s.conv_id=h.data.conversation.conv_id,e.$store.commit("SAVE_AUTO_SEND_MESSAGE","hi"),e.$reportAnalyticsFun("CONVO_CREATE",{source:"following",receiver_id:h.data.conversation.id})),a.next=22;break;case 19:u=c.list[0].conv_info||{},s.im_conv_id=u.im_conv_id,s.conv_id=u.conv_id;case 22:a.next=27;break;case 24:return e.$hideLoading(),e.$toast(l),a.abrupt("return");case 27:if(e.$hideLoading(),s.is_favourite=1,i.i(m.d)("currentChatAnchorDetail",s),e.$store.commit("SAVE_CURRENT_ANCHOR_DETAIL",s),e.$store.commit("UPDATE_ANCHOR_CHAT_LIST",{conversation_user:s,im_conv_id:s.im_conv_id}),!e.needJumpChatDetail){a.next=35;break}return e.$router.push("/chatDetail"),a.abrupt("return");case 35:e.messageMaps[s.im_conv_id]?(e.$store.commit("UPDATE_CHAT_DETAIL",s.im_conv_id),e.$router.push("/chatDetail")):(v=i.i(b.c)(s.im_conv_id),e.rwSocketClient.send(v),e.needJumpChatDetail=!0),a.next=42;break;case 38:a.prev=38,a.t0=a.catch(0),console.log(a.t0),e.$hideLoading();case 42:case"end":return a.stop()}},a,e,[[0,38]])}))()},detailPrivateCall:function(t){t.enterSource="convo",this.$refs.anchorVideo.privateCall(t)},handleUserMedia:function(){this.$refs.userMediaPop.changePopStatus(!0)},goOmegaClub:function(){this.$router.push("/omegaClub?tab=all")},goBack:function(){try{this.$router.go(-1)}catch(t){this.$router.push("/")}}}}},NksW:function(t,e,i){var a=i("2Bsn");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("3d274604",a,!0,{})},YVA4:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-container"},[i("div",[i("div",{staticClass:"title-container"},[i("img",{staticClass:"back",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/icon-back-24.png"},on:{click:t.goBack}}),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(t.localize.string_home_history))])]),t._v(" "),t.matchHistoryList.length>0?i("div",{staticClass:"you-like-list margin-bottom-56"},t._l(t.matchHistoryList,function(e,a){return i("div",{key:a,staticClass:"item"},[i("div",{staticClass:"left"},[i("img",{staticClass:"avatar",attrs:{src:e.user.icon},on:{click:function(i){t.clickUserAvatar(e)}}})]),t._v(" "),i("div",{staticClass:"middle",on:{click:function(i){t.clickUserAvatar(e)}}},[i("div",{staticClass:"name"},[t._v(t._s(e.user.first_name)+", "+t._s(e.user.age))]),t._v(" "),t._m(0,!0)]),t._v(" "),i("div",{staticClass:"right"},[i("img",{staticClass:"message-icon",attrs:{src:"https://chachaimg.s3.us-west-1.amazonaws.com/web/omega/message-icon.png"},on:{click:function(i){t.goChatDetail(e.user)}}})])])})):i("div",{staticClass:"empty-container"},[i("div",{staticClass:"empty-text"},[t._v(t._s(t.localize.string_history_none))]),t._v(" "),i("div",{staticClass:"to-chat",on:{click:t.goOmegaClub}},[t._v(t._s(t.localize.string_history_go))])])]),t._v(" "),t.isShowVideoDetail?i("anchor-detail",{ref:"videoDetail",on:{privateCall:t.detailPrivateCall}}):t._e(),t._v(" "),i("anchor-video",{ref:"anchorVideo",on:{showUserMedia:t.handleUserMedia}}),t._v(" "),i("user-media-pop",{ref:"userMediaPop"})],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"status"},[i("div",{staticClass:"icon"}),t._v(" "),i("div",{staticClass:"text"},[t._v("avaliable")])])}],s={render:a,staticRenderFns:r};e.a=s}});